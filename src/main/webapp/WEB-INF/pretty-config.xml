<pretty-config xmlns="http://ocpsoft.org/schema/rewrite-config-prettyfaces">
    <rewrite match="/*" trailingSlash="remove"/>

    <url-mapping>
        <pattern value="/"/>
        <view-id value="/faces/page.xhtml"/>
        <action>#{pageViewModel.loadRoot}</action>
    </url-mapping>

    <url-mapping>
        <pattern value="/page"/>
        <query-param name="id">#{pageViewModel.id}</query-param>
        <view-id value="/faces/page.xhtml"/>
        <action>#{pageViewModel.load}</action>
    </url-mapping>

    <url-mapping id="login">
        <pattern value="/login"/>
        <view-id value="/faces/login.xhtml"/>
    </url-mapping>
    <url-mapping id="register">
        <pattern value="/register"/>
        <view-id value="/faces/register.xhtml"/>
    </url-mapping>
    <url-mapping id="logout">
        <pattern value="/logout"/>
        <view-id value="/faces/logged-out.xhtml"/>
        <action>#{authBean.logOut}</action>
    </url-mapping>

    <url-mapping id="home">
        <pattern value="/admin/pages"/>
        <view-id value="/faces/restricted/pages.xhtml"/>
    </url-mapping>

    <url-mapping id="createPage">
        <pattern value="/admin/pages/#{parentId: adminPageViewModel.parentId}/create"/>
        <view-id value="/faces/restricted/new-page.xhtml"/>
        <action>#{adminPageViewModel.load}</action>
    </url-mapping>

    <url-mapping id="viewPage">
        <pattern value="/admin/pages/#{id: adminPageViewModel.id}"/>
        <view-id value="/faces/restricted/view-page.xhtml"/>
        <action>#{adminPageViewModel.load}</action>
    </url-mapping>
</pretty-config>
